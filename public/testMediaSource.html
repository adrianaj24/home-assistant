<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
  </head>
  <body>
    <div><video id="v1" height="500" width="500" controls="" muted="muted" autoplay=""></video></div>
    

    <script>
      let video = document.getElementById("v1");
      
      let ms = new MediaSource();
      video.src = window.URL.createObjectURL(ms);

      var oReq = new XMLHttpRequest();
      oReq.open("GET", "http://localhost:8080", true);
      oReq.responseType = "arraybuffer";
      oReq.send();
      

      oReq.onload = function(oEvent) {
        var arrayBuffer = oReq.response; // Note: not oReq.responseText

        console.log(24);

        // ms.onsourceopen = function(e) {
          console.log(27);
          var mediaSourceBuffer = ms.addSourceBuffer('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
          mediaSourceBuffer.appendBuffer(arrayBuffer);

      }
    </script>
  </body>
</html>
